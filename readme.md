# graphql-api-koa

[![npm version](https://img.shields.io/npm/v/graphql-api-koa.svg)](https://npm.im/graphql-api-koa) ![Licence](https://img.shields.io/npm/l/graphql-api-koa.svg) [![Github issues](https://img.shields.io/github/issues/jaydenseric/graphql-api-koa.svg)](https://github.com/jaydenseric/graphql-api-koa/issues) [![Github stars](https://img.shields.io/github/stars/jaydenseric/graphql-api-koa.svg)](https://github.com/jaydenseric/graphql-api-koa/stargazers) [![Travis status](https://img.shields.io/travis/jaydenseric/graphql-api-koa.svg)](https://travis-ci.org/jaydenseric/graphql-api-koa)

GraphQL API Koa middleware.

## Setup

Install with [npm](https://npmjs.com):

```sh
npm install graphql-api-koa
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

- [errorHandler](#errorhandler)
- [execute](#execute)
- [ExecuteOptions](#executeoptions)
- [graphqlPreset](#graphqlpreset)
- [Override](#override)

### errorHandler

- **See: [GraphQL Draft RFC Specification October 2016 ยง 7.2.2](http://facebook.github.io/graphql/October2016/#sec-Errors)**
- **See: [http-errors on npm.](https://npm.im/http-errors)**

GraphQL error handler Koa middleware. Use this middleware first to catch all middleware errors and correctly format a GraphQL response. Errors thrown outside resolvers without an `expose` property and `true` value are masked by a generic 500 error.

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Koa middleware.

### execute

Creates GraphQL execution Koa middleware.

**Parameters**

- `options` **[ExecuteOptions](#executeoptions)** Options.

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Koa middleware.

### ExecuteOptions

GraphQL execute Koa middleware options.

Type: [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)

**Properties**

- `schema` **module:graphql.GraphQLSchema** GraphQL schema.
- `rootValue` **any?** Value passed to the first resolver.
- `contextValue` **any?** Execution context (usually an object) passed to resolvers.
- `fieldResolver` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)?** Custom default field resolver.
- `override` **[Override](#override)?** Override options per request.

### graphqlPreset

Composes a Koa middleware GraphQL preset that includes request body parsing, GraphQL execution and error handling.

**Parameters**

- `options` **Options** Options. (optional, default `{}`)
  - `options.executeOptions` **[ExecuteOptions](#executeoptions)** Execute middleware options.

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Koa middleware.

### Override

Overrides Koa middleware options per-request.

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

**Parameters**

- `context` **module:koa.Context** Koa context.

Returns **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Options.
